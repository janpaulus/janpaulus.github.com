<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>youBot Driver: nicdrv.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_25d71d5c8d2691a7cba3a73e46ad9c5e.html">soem</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_01c86a16d024303798adabab51c94020.html">src</a>
  </div>
</div>
<div class="contents">
<h1>nicdrv.h File Reference</h1>
<p>Headerfile for <a class="el" href="nicdrv_8c.html" title="EtherCAT RAW socket driver.">nicdrv.c</a>.  
<a href="#_details">More...</a></p>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<div class="center"><img src="nicdrv_8h__dep__incl.png" border="0" usemap="#nicdrv_8hdep_map" alt=""/></div>
<map name="nicdrv_8hdep_map" id="nicdrv_8hdep">
<area shape="rect" href="eepromtool_8c.html" title="EEprom tool for Simple Open EtherCAT master." alt="" coords="5,83,101,112"/><area shape="rect" href="ethercatbase_8c.html" title="Base EtherCAT functions." alt="" coords="125,83,232,112"/><area shape="rect" href="ethercatcoe_8c.html" title="CAN over EtherCAT (CoE) module." alt="" coords="256,83,355,112"/><area shape="rect" href="ethercatconfig_8c.html" title="Configuration module for EtherCAT master." alt="" coords="379,83,493,112"/><area shape="rect" href="ethercatdc_8c.html" title="Distributed Clock EtherCAT functions." alt="" coords="541,83,635,112"/><area shape="rect" href="ethercatfoe_8c.html" title="File over EtherCAT (FoE) module." alt="" coords="659,83,755,112"/><area shape="rect" href="ethercatmain_8c.html" title="Main EtherCAT functions." alt="" coords="803,83,909,112"/><area shape="rect" href="ethercatsoe_8c.html" title="Servo over EtherCAT (SoE) Module." alt="" coords="933,83,1032,112"/><area shape="rect" href="nicdrv_8c.html" title="EtherCAT RAW socket driver." alt="" coords="1056,83,1123,112"/><area shape="rect" href="red__test_8c.html" title="Example code for Simple Open EtherCAT master." alt="" coords="1147,83,1227,112"/><area shape="rect" href="simple__test_8c.html" title="Example code for Simple Open EtherCAT master." alt="" coords="1251,83,1349,112"/><area shape="rect" href="slaveinfo_8c.html" title="Example code for Simple Open EtherCAT master." alt="" coords="1397,83,1480,112"/><area shape="rect" href="_ethercat_master_8cpp.html" title="EthercatMaster.cpp" alt="" coords="1504,83,1640,112"/><area shape="rect" href="_ethercat_master_without_thread_8cpp.html" title="EthercatMasterWithoutThread.cpp" alt="" coords="1664,83,1883,112"/></map>
</div>

<p><a href="nicdrv_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#a5b5e0bf5e801e9f30a0fcd9b50b3efc5">ec_setupnic</a> (const char *ifname, int secondary)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Basic setup to connect NIC to socket.  <a href="#a5b5e0bf5e801e9f30a0fcd9b50b3efc5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#ab023ae467cce8a520a2554f74415f2ef">ec_closenic</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close sockets used.  <a href="#ab023ae467cce8a520a2554f74415f2ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#a495531bac8f5d70b5a10494048b15820">ec_setupheader</a> (void *p)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fill buffer with ethernet header structure.  <a href="#a495531bac8f5d70b5a10494048b15820"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#a121be26fdb9da9ef5b9f217fdcd2d50f">ec_setbufstat</a> (<a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> idx, int bufstat)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set rx buffer status.  <a href="#a121be26fdb9da9ef5b9f217fdcd2d50f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#ae3520c51670d8e4e3e360f26fd8acee4">ec_getindex</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get new frame identifier index and allocate corresponding rx buffer.  <a href="#ae3520c51670d8e4e3e360f26fd8acee4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#a309256fbd711277837d4e0d6c15203a5">ec_outframe</a> (<a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> idx, int sock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Transmit buffer over socket (non blocking).  <a href="#a309256fbd711277837d4e0d6c15203a5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#afb39cbe067b1afa202e8c487a33c4d66">ec_outframe_red</a> (<a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> idx)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Transmit buffer over socket (non blocking).  <a href="#afb39cbe067b1afa202e8c487a33c4d66"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#a3bcbccf53a33907e16fa67c8e5b45d40">ec_waitinframe</a> (<a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> idx, int timeout)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Blocking receive frame function.  <a href="#a3bcbccf53a33907e16fa67c8e5b45d40"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#ae49716ef495b23fc91261396fb2f49ec">ec_srconfirm</a> (<a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> idx, int timeout)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Blocking send and recieve frame function.  <a href="#ae49716ef495b23fc91261396fb2f49ec"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#aee8e5ba09644b6afe45d29196bb35684">ec_rxbuf</a> [EC_MAXBUF]</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">primary rx buffers  <a href="#aee8e5ba09644b6afe45d29196bb35684"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#ad4c92ed6fc9b6c95768da08f36cbc14d">ec_txbuf</a> [EC_MAXBUF]</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">transmit buffers  <a href="#ad4c92ed6fc9b6c95768da08f36cbc14d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#a041f8a9db37041e44f598beb671415cd">ec_txbuf2</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">temporary tx buffer  <a href="#a041f8a9db37041e44f598beb671415cd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#aaf1d250c85c451800940716aded3296e">ec_txbuflength</a> [EC_MAXBUF]</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">transmit buffer lenghts  <a href="#aaf1d250c85c451800940716aded3296e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#a3ef78e050890fa525fd62c00b7bf4e7b">ec_txbuflength2</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">temporary tx buffer length  <a href="#a3ef78e050890fa525fd62c00b7bf4e7b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#aaeff8879a25a3d5a92db3c506a0aaf01">ec_incnt</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">global rx packet counter, counts only EtherCAT packets  <a href="#aaeff8879a25a3d5a92db3c506a0aaf01"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#adf1d3f16adb608dad43fcd5f1c83f603">ec_errcnt</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">global error packet counter, ie non EtherCAT packets  <a href="#adf1d3f16adb608dad43fcd5f1c83f603"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#ab7064cc03fe8cba363a8876ced93810b">ec_redstate</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">current redundancy state  <a href="#ab7064cc03fe8cba363a8876ced93810b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#ad7063eb4d29a8653fe75bb8662849e35">hlp_txtime</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">global helper var to count time used in tx socket  <a href="#ad7063eb4d29a8653fe75bb8662849e35"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#a4d3e965b1b72e65dd14f6ac9b745433b">hlp_rxtime</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">global helper var ri count time used in rx socket  <a href="#a4d3e965b1b72e65dd14f6ac9b745433b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#a97f56dc60b8e1cacda490bb696c69599">sockhandle</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">primary socket handle  <a href="#a97f56dc60b8e1cacda490bb696c69599"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#ad1438f8ed914dda0ad960f46568e1d31">sockhandle2</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">secondary socket handle  <a href="#ad1438f8ed914dda0ad960f46568e1d31"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="ethercattype_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#ad64f7787490ee767f77ad78021dd6bbd">priMAC</a> [3]</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Primary source MAC address used for EtherCAT.  <a href="#ad64f7787490ee767f77ad78021dd6bbd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="ethercattype_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8h.html#a1a8704686fbf15b235836459e6d82ebe">secMAC</a> [3]</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Secondary source MAC address used for EtherCAT.  <a href="#a1a8704686fbf15b235836459e6d82ebe"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Headerfile for <a class="el" href="nicdrv_8c.html" title="EtherCAT RAW socket driver.">nicdrv.c</a>. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ab023ae467cce8a520a2554f74415f2ef"></a><!-- doxytag: member="nicdrv.h::ec_closenic" ref="ab023ae467cce8a520a2554f74415f2ef" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ec_closenic </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Close sockets used. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 </dd></dl>

</div>
</div>
<a class="anchor" id="ae3520c51670d8e4e3e360f26fd8acee4"></a><!-- doxytag: member="nicdrv.h::ec_getindex" ref="ae3520c51670d8e4e3e360f26fd8acee4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> ec_getindex </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get new frame identifier index and allocate corresponding rx buffer. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>new index. </dd></dl>

</div>
</div>
<a class="anchor" id="a309256fbd711277837d4e0d6c15203a5"></a><!-- doxytag: member="nicdrv.h::ec_outframe" ref="a309256fbd711277837d4e0d6c15203a5" args="(uint8 idx, int sock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ec_outframe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stacknumber</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Transmit buffer over socket (non blocking). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>idx</em>&nbsp;</td><td>= index in tx buffer array </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>stacknumber</em>&nbsp;</td><td>= 0=Primary 1=Secondary stack </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>socket send result </dd></dl>

</div>
</div>
<a class="anchor" id="afb39cbe067b1afa202e8c487a33c4d66"></a><!-- doxytag: member="nicdrv.h::ec_outframe_red" ref="afb39cbe067b1afa202e8c487a33c4d66" args="(uint8 idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ec_outframe_red </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Transmit buffer over socket (non blocking). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>idx</em>&nbsp;</td><td>= index in tx buffer array </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>socket send result </dd></dl>

</div>
</div>
<a class="anchor" id="a121be26fdb9da9ef5b9f217fdcd2d50f"></a><!-- doxytag: member="nicdrv.h::ec_setbufstat" ref="a121be26fdb9da9ef5b9f217fdcd2d50f" args="(uint8 idx, int bufstat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ec_setbufstat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bufstat</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set rx buffer status. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>idx</em>&nbsp;</td><td>= index in buffer array </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bufstat</em>&nbsp;</td><td>= status to set </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a495531bac8f5d70b5a10494048b15820"></a><!-- doxytag: member="nicdrv.h::ec_setupheader" ref="a495531bac8f5d70b5a10494048b15820" args="(void *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ec_setupheader </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Fill buffer with ethernet header structure. </p>
<p>Destination MAC is allways broadcast. Ethertype is allways ETH_P_ECAT. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>p</em>&nbsp;</td><td>= buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5b5e0bf5e801e9f30a0fcd9b50b3efc5"></a><!-- doxytag: member="nicdrv.h::ec_setupnic" ref="a5b5e0bf5e801e9f30a0fcd9b50b3efc5" args="(const char *ifname, int secondary)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ec_setupnic </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ifname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>secondary</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Basic setup to connect NIC to socket. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ifname</em>&nbsp;</td><td>= Name of NIC device, f.e. "eth0" </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>secondary</em>&nbsp;</td><td>= if &gt;0 then use secondary stack instead of primary </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>&gt;0 if succeeded </dd></dl>

</div>
</div>
<a class="anchor" id="ae49716ef495b23fc91261396fb2f49ec"></a><!-- doxytag: member="nicdrv.h::ec_srconfirm" ref="ae49716ef495b23fc91261396fb2f49ec" args="(uint8 idx, int timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ec_srconfirm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Blocking send and recieve frame function. </p>
<p>Used for non processdata frames. A datagram is build into a frame and transmitted via this function. It waits for an answer and returns the workcounter. The function retries if time is left and the result is WKC=0 or no frame received.</p>
<p>The function calls <a class="el" href="nicdrv_8c.html#afb39cbe067b1afa202e8c487a33c4d66" title="Transmit buffer over socket (non blocking).">ec_outframe_red()</a> and ec_waitinframe_red().</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>idx</em>&nbsp;</td><td>= index of frame </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>timeout</em>&nbsp;</td><td>= timeout in us </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Workcounter or EC_NOFRAME </dd></dl>

</div>
</div>
<a class="anchor" id="a3bcbccf53a33907e16fa67c8e5b45d40"></a><!-- doxytag: member="nicdrv.h::ec_waitinframe" ref="a3bcbccf53a33907e16fa67c8e5b45d40" args="(uint8 idx, int timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ec_waitinframe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Blocking receive frame function. </p>
<p>Calls ec_waitinframe_red(). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>idx</em>&nbsp;</td><td>= requested index of frame </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>timeout</em>&nbsp;</td><td>= timeout in us </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Workcounter if a frame is found with corresponding index, otherwise EC_NOFRAME. </dd></dl>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="adf1d3f16adb608dad43fcd5f1c83f603"></a><!-- doxytag: member="nicdrv.h::ec_errcnt" ref="adf1d3f16adb608dad43fcd5f1c83f603" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#adf1d3f16adb608dad43fcd5f1c83f603">ec_errcnt</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>global error packet counter, ie non EtherCAT packets </p>

</div>
</div>
<a class="anchor" id="aaeff8879a25a3d5a92db3c506a0aaf01"></a><!-- doxytag: member="nicdrv.h::ec_incnt" ref="aaeff8879a25a3d5a92db3c506a0aaf01" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#aaeff8879a25a3d5a92db3c506a0aaf01">ec_incnt</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>global rx packet counter, counts only EtherCAT packets </p>

</div>
</div>
<a class="anchor" id="ab7064cc03fe8cba363a8876ced93810b"></a><!-- doxytag: member="nicdrv.h::ec_redstate" ref="ab7064cc03fe8cba363a8876ced93810b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#ab7064cc03fe8cba363a8876ced93810b">ec_redstate</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>current redundancy state </p>

</div>
</div>
<a class="anchor" id="aee8e5ba09644b6afe45d29196bb35684"></a><!-- doxytag: member="nicdrv.h::ec_rxbuf" ref="aee8e5ba09644b6afe45d29196bb35684" args="[EC_MAXBUF]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a> <a class="el" href="nicdrv_8h.html#aee8e5ba09644b6afe45d29196bb35684">ec_rxbuf</a>[EC_MAXBUF]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>primary rx buffers </p>

</div>
</div>
<a class="anchor" id="ad4c92ed6fc9b6c95768da08f36cbc14d"></a><!-- doxytag: member="nicdrv.h::ec_txbuf" ref="ad4c92ed6fc9b6c95768da08f36cbc14d" args="[EC_MAXBUF]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a> <a class="el" href="nicdrv_8h.html#ad4c92ed6fc9b6c95768da08f36cbc14d">ec_txbuf</a>[EC_MAXBUF]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>transmit buffers </p>

</div>
</div>
<a class="anchor" id="a041f8a9db37041e44f598beb671415cd"></a><!-- doxytag: member="nicdrv.h::ec_txbuf2" ref="a041f8a9db37041e44f598beb671415cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a> <a class="el" href="nicdrv_8h.html#a041f8a9db37041e44f598beb671415cd">ec_txbuf2</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>temporary tx buffer </p>

</div>
</div>
<a class="anchor" id="aaf1d250c85c451800940716aded3296e"></a><!-- doxytag: member="nicdrv.h::ec_txbuflength" ref="aaf1d250c85c451800940716aded3296e" args="[EC_MAXBUF]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#aaf1d250c85c451800940716aded3296e">ec_txbuflength</a>[EC_MAXBUF]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>transmit buffer lenghts </p>

</div>
</div>
<a class="anchor" id="a3ef78e050890fa525fd62c00b7bf4e7b"></a><!-- doxytag: member="nicdrv.h::ec_txbuflength2" ref="a3ef78e050890fa525fd62c00b7bf4e7b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#a3ef78e050890fa525fd62c00b7bf4e7b">ec_txbuflength2</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>temporary tx buffer length </p>

</div>
</div>
<a class="anchor" id="a4d3e965b1b72e65dd14f6ac9b745433b"></a><!-- doxytag: member="nicdrv.h::hlp_rxtime" ref="a4d3e965b1b72e65dd14f6ac9b745433b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#a4d3e965b1b72e65dd14f6ac9b745433b">hlp_rxtime</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>global helper var ri count time used in rx socket </p>

</div>
</div>
<a class="anchor" id="ad7063eb4d29a8653fe75bb8662849e35"></a><!-- doxytag: member="nicdrv.h::hlp_txtime" ref="ad7063eb4d29a8653fe75bb8662849e35" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#ad7063eb4d29a8653fe75bb8662849e35">hlp_txtime</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>global helper var to count time used in tx socket </p>

</div>
</div>
<a class="anchor" id="ad64f7787490ee767f77ad78021dd6bbd"></a><!-- doxytag: member="nicdrv.h::priMAC" ref="ad64f7787490ee767f77ad78021dd6bbd" args="[3]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="ethercattype_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="el" href="nicdrv_8h.html#ad64f7787490ee767f77ad78021dd6bbd">priMAC</a>[3]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Primary source MAC address used for EtherCAT. </p>
<p>This address is not the MAC address used from the NIC. EtherCAT does not care about MAC addressing, but it is used here to differentiate the route the packet traverses through the EtherCAT segment. This is needed to find out the packet flow in redundant configurations. </p>

</div>
</div>
<a class="anchor" id="a1a8704686fbf15b235836459e6d82ebe"></a><!-- doxytag: member="nicdrv.h::secMAC" ref="a1a8704686fbf15b235836459e6d82ebe" args="[3]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="ethercattype_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="el" href="nicdrv_8h.html#a1a8704686fbf15b235836459e6d82ebe">secMAC</a>[3]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Secondary source MAC address used for EtherCAT. </p>

</div>
</div>
<a class="anchor" id="a97f56dc60b8e1cacda490bb696c69599"></a><!-- doxytag: member="nicdrv.h::sockhandle" ref="a97f56dc60b8e1cacda490bb696c69599" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#a97f56dc60b8e1cacda490bb696c69599">sockhandle</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>primary socket handle </p>

</div>
</div>
<a class="anchor" id="ad1438f8ed914dda0ad960f46568e1d31"></a><!-- doxytag: member="nicdrv.h::sockhandle2" ref="ad1438f8ed914dda0ad960f46568e1d31" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#ad1438f8ed914dda0ad960f46568e1d31">sockhandle2</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>secondary socket handle </p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
