<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>youBot Driver: DataObjectLockFree&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>youbot</b>::<a class="el" href="classyoubot_1_1_data_object_lock_free.html">DataObjectLockFree</a>
  </div>
</div>
<div class="contents">
<h1>DataObjectLockFree&lt; T &gt; Class Template Reference</h1><!-- doxytag: class="youbot::DataObjectLockFree" -->
<p>This DataObject is a Lock-Free implementation, such that reads and writes can happen concurrently without priority inversions.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_data_object_lock_free_8hpp_source.html">DataObjectLockFree.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for DataObjectLockFree&lt; T &gt;:</div>
<div class="dynsection">
<div class="center"><img src="classyoubot_1_1_data_object_lock_free__coll__graph.png" border="0" usemap="#_data_object_lock_free_3_01_t_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="_data_object_lock_free_3_01_t_01_4_coll__map" id="_data_object_lock_free_3_01_t_01_4_coll__map">
<area shape="rect" title="Internal buffer structure." alt="" coords="57,101,124,131"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classyoubot_1_1_data_object_lock_free-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>DataBuf</b></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal buffer structure. <br/></td></tr>
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef T&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classyoubot_1_1_data_object_lock_free.html#afe400d3f662f42fab8f065a689ba9a4a">DataType</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The type of the data.  <a href="#afe400d3f662f42fab8f065a689ba9a4a"></a><br/></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classyoubot_1_1_data_object_lock_free.html#afd7ba0ee6be550bd9da2f574c6abc762">DataObjectLockFree</a> (const T &amp;initial_value=T(), unsigned int max_threads=2)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construct a <a class="el" href="classyoubot_1_1_data_object_lock_free.html" title="This DataObject is a Lock-Free implementation, such that reads and writes can happen...">DataObjectLockFree</a> by name.  <a href="#afd7ba0ee6be550bd9da2f574c6abc762"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classyoubot_1_1_data_object_lock_free.html#af1aed8f33433dac17e7aabda1d010507">~DataObjectLockFree</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classyoubot_1_1_data_object_lock_free.html#afe400d3f662f42fab8f065a689ba9a4a">DataType</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classyoubot_1_1_data_object_lock_free.html#a42e9a061d84f8646a92d807e9657a74c">Get</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get a copy of the data.  <a href="#a42e9a061d84f8646a92d807e9657a74c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classyoubot_1_1_data_object_lock_free.html#af9fcfb5ee413694bfb334e0ad8e51560">Get</a> (<a class="el" href="classyoubot_1_1_data_object_lock_free.html#afe400d3f662f42fab8f065a689ba9a4a">DataType</a> &amp;pull) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get a copy of the Data (non allocating).  <a href="#af9fcfb5ee413694bfb334e0ad8e51560"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classyoubot_1_1_data_object_lock_free.html#a6c00d55b920ec29b410c4a084e823fdf">Set</a> (const <a class="el" href="classyoubot_1_1_data_object_lock_free.html#afe400d3f662f42fab8f065a689ba9a4a">DataType</a> &amp;push)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the data to a certain value (non blocking).  <a href="#a6c00d55b920ec29b410c4a084e823fdf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classyoubot_1_1_data_object_lock_free.html#a9927fbb626564a0972b8325db66b04b7">data_sample</a> (const <a class="el" href="classyoubot_1_1_data_object_lock_free.html#afe400d3f662f42fab8f065a689ba9a4a">DataType</a> &amp;sample)</td></tr>
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classyoubot_1_1_data_object_lock_free.html#ae01fccceb2235efe2e689c041f1c9e23">MAX_THREADS</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The maximum number of threads.  <a href="#ae01fccceb2235efe2e689c041f1c9e23"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;class T&gt;<br/>
 class youbot::DataObjectLockFree&lt; T &gt;</h3>

<p>This DataObject is a Lock-Free implementation, such that reads and writes can happen concurrently without priority inversions. </p>
<p>When there are more writes than reads, the last write will be returned. The internal buffer can get full if too many concurrent reads are taking to long. In that case, each new read will read the element the previous read returned.</p>
<div class="fragment"><pre class="fragment">
     * The following Truth table applies when a Low Priority thread is
     * preempted by a High Priority thread :
     *
     *   L\H | Set | Get |
     *   Set | Ok  | Ok  |
     *   Get | Ok  | Ok  |
     *
     * legend : L : Low Priority thread
     *          H : High Priority thread
     *          Blk: Blocks High Priority thread (bad!)
     *          internal::NA : Not allowed !
     * </pre></div><p> Further, multiple reads may occur before, during and after a write operation simultaneously. The buffer needs readers+2*writers elements to be guaranteed non blocking. </p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="afe400d3f662f42fab8f065a689ba9a4a"></a><!-- doxytag: member="youbot::DataObjectLockFree::DataType" ref="afe400d3f662f42fab8f065a689ba9a4a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef T <a class="el" href="classyoubot_1_1_data_object_lock_free.html#afe400d3f662f42fab8f065a689ba9a4a">DataType</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The type of the data. </p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="afd7ba0ee6be550bd9da2f574c6abc762"></a><!-- doxytag: member="youbot::DataObjectLockFree::DataObjectLockFree" ref="afd7ba0ee6be550bd9da2f574c6abc762" args="(const T &amp;initial_value=T(), unsigned int max_threads=2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classyoubot_1_1_data_object_lock_free.html">DataObjectLockFree</a> </td>
          <td>(</td>
          <td class="paramtype">const T &amp;&nbsp;</td>
          <td class="paramname"> <em>initial_value</em> = <code>T()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>max_threads</em> = <code>2</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Construct a <a class="el" href="classyoubot_1_1_data_object_lock_free.html" title="This DataObject is a Lock-Free implementation, such that reads and writes can happen...">DataObjectLockFree</a> by name. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>_name</em>&nbsp;</td><td>The name of this DataObject. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>initial_value</em>&nbsp;</td><td>The initial value of this DataObject. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af1aed8f33433dac17e7aabda1d010507"></a><!-- doxytag: member="youbot::DataObjectLockFree::~DataObjectLockFree" ref="af1aed8f33433dac17e7aabda1d010507" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classyoubot_1_1_data_object_lock_free.html">DataObjectLockFree</a> </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a9927fbb626564a0972b8325db66b04b7"></a><!-- doxytag: member="youbot::DataObjectLockFree::data_sample" ref="a9927fbb626564a0972b8325db66b04b7" args="(const DataType &amp;sample)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void data_sample </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classyoubot_1_1_data_object_lock_free.html#afe400d3f662f42fab8f065a689ba9a4a">DataType</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>sample</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af9fcfb5ee413694bfb334e0ad8e51560"></a><!-- doxytag: member="youbot::DataObjectLockFree::Get" ref="af9fcfb5ee413694bfb334e0ad8e51560" args="(DataType &amp;pull) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classyoubot_1_1_data_object_lock_free.html#afe400d3f662f42fab8f065a689ba9a4a">DataType</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>pull</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get a copy of the Data (non allocating). </p>
<p>If pull has reserved enough memory to store the copy, no memory will be allocated.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pull</em>&nbsp;</td><td>A copy of the data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a42e9a061d84f8646a92d807e9657a74c"></a><!-- doxytag: member="youbot::DataObjectLockFree::Get" ref="a42e9a061d84f8646a92d807e9657a74c" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classyoubot_1_1_data_object_lock_free.html#afe400d3f662f42fab8f065a689ba9a4a">DataType</a> Get </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get a copy of the data. </p>
<p>This method will allocate memory twice if data is not a value type. Use Get(DataType&amp;) for the non-allocating version.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>A copy of the data. </dd></dl>

</div>
</div>
<a class="anchor" id="a6c00d55b920ec29b410c4a084e823fdf"></a><!-- doxytag: member="youbot::DataObjectLockFree::Set" ref="a6c00d55b920ec29b410c4a084e823fdf" args="(const DataType &amp;push)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Set </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classyoubot_1_1_data_object_lock_free.html#afe400d3f662f42fab8f065a689ba9a4a">DataType</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>push</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the data to a certain value (non blocking). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>push</em>&nbsp;</td><td>The data which must be set. </td></tr>
  </table>
  </dd>
</dl>

<p><p>This method can not be called concurrently (only one producer). With a minimum of 3 buffers, if the write_ptr+1 field is not occupied, it will remain so because the read_ptr is at write_ptr-1 (and can not increment the counter on write_ptr+1). Hence, no locking is needed.</p>
</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ae01fccceb2235efe2e689c041f1c9e23"></a><!-- doxytag: member="youbot::DataObjectLockFree::MAX_THREADS" ref="ae01fccceb2235efe2e689c041f1c9e23" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned int <a class="el" href="classyoubot_1_1_data_object_lock_free.html#ae01fccceb2235efe2e689c041f1c9e23">MAX_THREADS</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The maximum number of threads. </p>
<p>When used in data flow, this is always 2. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="_data_object_lock_free_8hpp_source.html">DataObjectLockFree.hpp</a></li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
